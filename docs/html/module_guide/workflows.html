

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Workflows &mdash; yambo-aiida 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within yambo-aiida 0.1.0 documentation"
          href="../_static/opensearch.xml"/>

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Calculations" href="calculations.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> yambo-aiida
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/get_started/index.html">Get started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/workflows/index.html">Workflows for AiiDA-Yambo</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Modules provided with aiida-yambo (API reference)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="calculations.html">Calculations</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Workflows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-aiida_yambo.workflows.yamboconvergence">YAMBO Workflows</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">yambo-aiida</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Modules provided with aiida-yambo (API reference)</a> &raquo;</li>
        
      <li>Workflows</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="workflows">
<h1>Workflows<a class="headerlink" href="#workflows" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>This section describes the different workflows classes for automated calculations.</p>
<div class="section" id="module-aiida_yambo.workflows.yamboconvergence">
<span id="yambo-workflows"></span><h2>YAMBO Workflows<a class="headerlink" href="#module-aiida_yambo.workflows.yamboconvergence" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aiida_yambo.workflows.yamboconvergence.YamboConvergence">
<em class="property">class </em><code class="descclassname">aiida_yambo.workflows.yamboconvergence.</code><code class="descname">YamboConvergence</code><span class="sig-paren">(</span><em>inputs=None</em>, <em>logger=None</em>, <em>runner=None</em>, <em>enable_persistence=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yamboconvergence.html#YamboConvergence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yamboconvergence.YamboConvergence" title="Permalink to this definition">¶</a></dt>
<dd><p>This workflow will perform yambo convergences with the respect some parameter. It can be used also to run multi-parameter
calculations.</p>
<dl class="classmethod">
<dt id="aiida_yambo.workflows.yamboconvergence.YamboConvergence.define">
<em class="property">classmethod </em><code class="descname">define</code><span class="sig-paren">(</span><em>spec</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yamboconvergence.html#YamboConvergence.define"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yamboconvergence.YamboConvergence.define" title="Permalink to this definition">¶</a></dt>
<dd><p>Workfunction definition</p>
</dd></dl>

<dl class="method">
<dt id="aiida_yambo.workflows.yamboconvergence.YamboConvergence.has_to_continue">
<code class="descname">has_to_continue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yamboconvergence.html#YamboConvergence.has_to_continue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yamboconvergence.YamboConvergence.has_to_continue" title="Permalink to this definition">¶</a></dt>
<dd><p>This function checks the status of the last calculation and determines what happens next, including a successful exit</p>
</dd></dl>

<dl class="method">
<dt id="aiida_yambo.workflows.yamboconvergence.YamboConvergence.next_step">
<code class="descname">next_step</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yamboconvergence.html#YamboConvergence.next_step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yamboconvergence.YamboConvergence.next_step" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will submit the next step</p>
</dd></dl>

<dl class="method">
<dt id="aiida_yambo.workflows.yamboconvergence.YamboConvergence.start_workflow">
<code class="descname">start_workflow</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yamboconvergence.html#YamboConvergence.start_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yamboconvergence.YamboConvergence.start_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the workflow</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-aiida_yambo.workflows.yamborestart"></span><dl class="class">
<dt id="aiida_yambo.workflows.yamborestart.YamboRestartWf">
<em class="property">class </em><code class="descclassname">aiida_yambo.workflows.yamborestart.</code><code class="descname">YamboRestartWf</code><span class="sig-paren">(</span><em>inputs=None</em>, <em>logger=None</em>, <em>runner=None</em>, <em>enable_persistence=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yamborestart.html#YamboRestartWf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yamborestart.YamboRestartWf" title="Permalink to this definition">¶</a></dt>
<dd><p>This module interacts directly with the yambo plugin to submit calculations</p>
<p>This module submits calculations using the yambo plugin, and manages them, including
restarting the calculation in case of:
1. Memory problems (will reduce MPI parallelism before resubmitting) – to be fixed
2. Queue time exhaustions (will increase time by a fraction before resubmitting)
3. Parallelism errors (will reduce the MPI the parallelism before resubmitting)  – to be fixed
4. Errors originating from a few select unphysical input parameters like too low bands.  – to be fixed</p>
<dl class="method">
<dt id="aiida_yambo.workflows.yamborestart.YamboRestartWf.report_wf">
<code class="descname">report_wf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yamborestart.html#YamboRestartWf.report_wf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yamborestart.YamboRestartWf.report_wf" title="Permalink to this definition">¶</a></dt>
<dd><p>Report the outputs of the workchain</p>
<p>Output final quantities
return information that may be used to figure out
the status of the calculation.</p>
</dd></dl>

<dl class="method">
<dt id="aiida_yambo.workflows.yamborestart.YamboRestartWf.yambo_restart">
<code class="descname">yambo_restart</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yamborestart.html#YamboRestartWf.yambo_restart"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yamborestart.YamboRestartWf.yambo_restart" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits a yambo calculation using the yambo plugin</p>
<p>This function submits a calculation, usually this represents a
resubmission of a failed calculation, or a continuation from P2Y/Init run.</p>
</dd></dl>

<dl class="method">
<dt id="aiida_yambo.workflows.yamborestart.YamboRestartWf.yambo_should_restart">
<code class="descname">yambo_should_restart</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yamborestart.html#YamboRestartWf.yambo_should_restart"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yamborestart.YamboRestartWf.yambo_should_restart" title="Permalink to this definition">¶</a></dt>
<dd><p>This function encodes the logic to restart calculations from failures
—&gt; I want to do the error detection at the parser level..</p>
</dd></dl>

<dl class="method">
<dt id="aiida_yambo.workflows.yamborestart.YamboRestartWf.yambobegin">
<code class="descname">yambobegin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yamborestart.html#YamboRestartWf.yambobegin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yamborestart.YamboRestartWf.yambobegin" title="Permalink to this definition">¶</a></dt>
<dd><p>setup of the calculation and run</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-aiida_yambo.workflows.yambowf"></span><dl class="class">
<dt id="aiida_yambo.workflows.yambowf.YamboWorkflow">
<em class="property">class </em><code class="descclassname">aiida_yambo.workflows.yambowf.</code><code class="descname">YamboWorkflow</code><span class="sig-paren">(</span><em>inputs=None</em>, <em>logger=None</em>, <em>runner=None</em>, <em>enable_persistence=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yambowf.html#YamboWorkflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yambowf.YamboWorkflow" title="Permalink to this definition">¶</a></dt>
<dd><p>This workflow will perform yambo calculation on the top of scf+nscf or from scratch,
invoking qe workchains.</p>
<dl class="method">
<dt id="aiida_yambo.workflows.yambowf.YamboWorkflow.can_continue">
<code class="descname">can_continue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yambowf.html#YamboWorkflow.can_continue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yambowf.YamboWorkflow.can_continue" title="Permalink to this definition">¶</a></dt>
<dd><p>This function checks the status of the last calculation and determines what happens next, including a successful exit</p>
</dd></dl>

<dl class="classmethod">
<dt id="aiida_yambo.workflows.yambowf.YamboWorkflow.define">
<em class="property">classmethod </em><code class="descname">define</code><span class="sig-paren">(</span><em>spec</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yambowf.html#YamboWorkflow.define"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yambowf.YamboWorkflow.define" title="Permalink to this definition">¶</a></dt>
<dd><p>Workfunction definition</p>
</dd></dl>

<dl class="method">
<dt id="aiida_yambo.workflows.yambowf.YamboWorkflow.perform_next">
<code class="descname">perform_next</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yambowf.html#YamboWorkflow.perform_next"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yambowf.YamboWorkflow.perform_next" title="Permalink to this definition">¶</a></dt>
<dd><p>This function  will submit the next step, depending on the information provided in the context</p>
<p>The next step will be a yambo calculation if the provided inputs are a previous yambo/p2y run
Will be a PW scf/nscf if the inputs do not provide the NSCF or previous yambo parent calculations</p>
</dd></dl>

<dl class="method">
<dt id="aiida_yambo.workflows.yambowf.YamboWorkflow.start_workflow">
<code class="descname">start_workflow</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida_yambo/workflows/yambowf.html#YamboWorkflow.start_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida_yambo.workflows.yambowf.YamboWorkflow.start_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the workflow, set the parent calculation</p>
<p>This function sets the parent, and its type
there is no submission done here, only setting up the neccessary inputs the workchain needs in the next
steps to decide what are the subsequent steps</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="calculations.html" class="btn btn-neutral float-left" title="Calculations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2020, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and CNR NANO Modena, Italy. All rights reserved.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>